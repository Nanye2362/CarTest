!function(){function e(){this.defaultOptions={}}e.prototype={init:function(e){},addUsernameValidate:function(){$.validator.addMethod("isUsername",function(e,t){var a=/^[0-9a-zA-Z-_]{4,15}$/;return!!this.optional(t)||!!a.test(e)},"请输入正确的用户名")},addPhoneValidate:function(){$.validator.addMethod("isPhone",function(e,t){var a=/^([0-9]{3,4}-)?[0-9]{7,8}$/,o=/^((\+?86)|(\(\+86\)))?(13[0123456789][0-9]{8}|15[012356789][0-9]{8}|18[02356789][0-9]{8}|147[0-9]{8}|1349[0-9]{7})$/;return!!this.optional(t)||!(!a.test(e)&&!o.test(e))},"请输入正确的手机号或电话号码")},addMobileValidate:function(){$.validator.addMethod("isMobile",function(e,t){var a=/^((\+?86)|(\(\+86\)))?(13[0123456789][0-9]{8}|15[012356789][0-9]{8}|18[02356789][0-9]{8}|147[0-9]{8}|1349[0-9]{7})$/;return!!this.optional(t)||!!a.test(e)},"请输入正确的手机号")},addMobileIsHaveForRegister:function(){$.validator.addMethod("mobileIsHaveForRegister",function(e,t){if(this.optional(t))return!0;var a=!0,o=getRootPath()+"/messageCode/phoneIsHave.json";return $.ajax({type:"get",url:o,data:"mobile="+e,contentType:"application/json",async:!1,cache:!1,dataType:"json",error:function(e){},success:function(e){a=101501!=e.status}}),a},"此手机号已经被注册")},addEmailValidate:function(){$.validator.addMethod("isEmail",function(e,t){var a=/^(?:\w+\.?)*\w+@(?:\w+\.)*\w+$/;return!!this.optional(t)||!!a.test(e)},"请输入正确的邮箱")},addEmailIsHaveForRegister:function(){$.validator.addMethod("emailIsHaveForRegister",function(e,t){if(this.optional(t))return!0;var a=!0,o=getRootPath()+"/messageCode/emailIsHave.json";return $.ajax({type:"get",url:o,data:"email="+e,contentType:"application/json",async:!1,cache:!1,dataType:"json",error:function(e){},success:function(e){a=10001!=e.status}}),a},"此邮箱已经被注册")},isNumber:function(e){return/^\d+(\.{0,1}\d+){0,1}$/.test(e)},isFolat:function(e){return/^[0-9]+([.]{1}[0-9]{1,2})?$/.test(e)},validate:function(e,t,a){this.addPhoneValidate(),this.addEmailValidate(),this.addMobileValidate(),this.addMobileIsHaveForRegister(),this.addEmailIsHaveForRegister(),this.addUsernameValidate();var o=t.rules,n=t.messages;t.errorLabelContainer;$("#"+e).validate({submitHandler:function(){a()},rules:o,messages:n,onkeyup:!1,onfocusout:!1,highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},success:function(e){e.addClass("valid").closest(".form-group").removeClass("has-error").addClass("has-success")}})},globalAjax:function(e,t,a,o){var n,s=JSON.stringify(a);$.blockUI({message:'<img src="/kzf6/images/gif/loading.gif" />  处理中，请稍后...'}),$.ajax({url:e,type:t,data:s,cache:!0,dataType:"json",contentType:"application/json",success:function(e){n=e,o&&$.isFunction(o)&&(n&&"string"==typeof n&&(n=$.parseJSON(n)),o(n))},error:function(e,t,a){n=$.parseJSON(e.responseText),o(n)},complete:function(){$.unblockUI()}})},globalAjaxWithTips:function(e,t,a,o){var n,s=JSON.stringify(a);$.blockUI({message:'<img src="/kzf6/images/gif/loading.gif" />  处理中，请稍后...'}),$.ajax({url:e,type:t,data:s,cache:!0,dataType:"json",contentType:"application/json",success:function(e){n=e,o&&$.isFunction(o)&&(n&&"string"==typeof n&&(n=$.parseJSON(n)),o(n))},error:function(e,t,a){Messenger().post({message:"对不起，系统忙，请稍后再试...",type:"error",hideAfter:3})},complete:function(){$.unblockUI()}})},ajaxGetPage:function(e,t,a,o){var n,s=JSON.stringify(a);$.ajax({url:e+"?timestamp="+(new Date).getTime(),type:t,data:s,cache:!0,dataType:"html",contentType:"application/json",success:function(e){o(n=e)},error:function(e,t,a){n=$.parseJSON(e.responseText),o(n)}})},showErrorTips:function(e){Messenger().post({message:e,type:"error",hideAfter:3})},initCategoryTree:function(e,t,a){e.treeview({data:t,showBorder:!1,onNodeSelected:function(e,t){a&&$.isFunction(a)&&a(e,t)}})},processCategoryTreeData:function(e){if(e&&0==e.nodes.length)e.nodes=null;else if(e&&0!=e.nodes.length)for(var t=e.nodes.length,a=0;a<t;++a)tb.processCategoryTreeData(e.nodes[a])},inputAutocomplete:function(e,t,a,o,n){$("#"+e).autocomplete({source:function(e,o){$.ajax({url:t,dataType:"json",type:a,contentType:"application/json",data:JSON.stringify({name:e.term}),success:function(e){null!=e&&(e.data?o($.map(e.data,function(e){if(e.goodsName){var t=e.goodsOE,a=e.goodsModel,o=t||a,n=(t?"原厂件 ":e.brandName)+" "+e.goodsName+" "+o;return n=escapeHtml(n),e.goodsName=escapeHtml(e.goodsName),{label:n,value:e.goodsName,id:e.goodsId}}})):e?o($.map(e,function(e){var t="";return parseFloat(e.stockNumber)>=0&&(t="  现有库存数："+e.stockNumber),e.partShowName=escapeHtml(e.partShowName),{label:e.partShowName+" "+t,value:e.partShowName,id:e.idPart,Object:e}})):n&&$.isFunction(n)&&n())}})},select:function(e,t){return o(e,t),!1}})}},window.tb=new e}();
//# sourceMappingURL=tb-470d838009.js.map
